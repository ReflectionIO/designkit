<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="utf-8" />
	<title>Reflection V2, Data Lab, Top Downloads</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!--[if (gt IE 9)|(IEMobile)|(!IE)]><!-->
		<link rel="stylesheet" type="text/css" href="reflection-main-v2.css" />
	<!--<![endif]-->
	<!--[if IE 9]>
		<link rel="stylesheet" type="text/css" href="ie9-v2-one.css" />
		<link rel="stylesheet" type="text/css" href="ie9-v2-two.css" />
	<![endif]-->
	<!--[if (lt IE 9)]>
		<script src="js/vendor/html5shiv.min.js"></script>
		<link rel="stylesheet" media="screen, projection" type="text/css" href="reflection-main-ie8.css" />
	<![endif]-->
	<link rel="stylesheet" href="js/vendor/jquery.mCustomScrollbar.css" />
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Source Sans Pro:400,600,700', 'Lato:400,700,400italic']
    }
  });
</script></head>
<body>
	<!--[if (lt IE 9)]>
      <div class="window-warning">
  			<p>Uh oh... Reflection doesn't work in this browser. &nbsp; &nbsp;<a href="http://outdatedbrowser.com/en" target="_blank">Download a compatible browser</a></p>
  		</div>
  <![endif]-->

  <header id="js-component-import--global-header" class="global-header"></header>
  
	<div id="js-component-import--panel-left" class="panel-left js-panel-left js-custom-scrollbar" data-mcs-theme="minimal-dark"></div>

	<div class="l-page-container">
		<div id="main" class="l-main" role="main">
			<div class="page-lab-base data-vis-making-top-charts grid-container is-loading js-page-container theme-dark">
				
				<div class="grid__row grid__row--heading-row">
					<div class="grid__row--heading-row__left">
						<h1 class="heading-style--heading-three page-title">What Downloads or Revenue are Needed to Break into the Top Charts?</h1>
					</div>
					<div class="grid__row--heading-row__right">
						<button class="ref-button--primary--medium">
	 						Share This
	 					</button>
					</div>
					<div class="filters-row">
						<span class="filter-label">To Break Into</span>
						<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
							<select class="js-select-box">
						    <option value="top200" selected>Top 200 Apps</option>
						    <option value="top150">Top 150 Apps</option>
						    <option value="top100">Top 100 Apps</option>
						    <option value="top50">Top 50 Apps</option>
						    <option value="top20">Top 20 Apps</option>
						    <option value="top10">Top 10 Apps</option>
							</select>
						</div>
						<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
							<select class="js-select-box">
						    <option value="uk" selected>United Kingdom</option>
						    <option value="usa">USA</option>
						    <option value="fra">France</option>
						    <option value="ita">Italy</option>
						    <option value="ger">Germany</option>
							</select>
						</div>
						<span class="filter-label"><a href="#" class="js-onboarding-link">What's This Showing Me?</a></span>
						<div class="filters-right">
							<span class="filter-label">Show Data For</span>
							<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
								<select class="js-select-box">
							    <option value="mar">March 2016</option>
							    <option value="apr">April 2016</option>
							    <option value="may">May 2016</option>
							    <option value="jun">June 2016</option>
							    <option value="jul" selected>July 2016</option>
								</select>
							</div>
						</div>
					</div>
				</div>

				<div class="grid__row data-vis-making-top-charts__main">

					<div class="data-vis-making-top-charts__categories">
						<h2>Category</h2>
						<ul class="js-category-list">
							<li class="data-vis-making-top-charts__category"><span>Overall</span></li>
							<li class="data-vis-making-top-charts__category data-vis-making-top-charts__category--has-subcategories js-has-subcategories">
								<span class="ref-icon-after--angle-down">Games</span>
								<ul>
									<li class="data-vis-making-top-charts__sub-category"><span>Action</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Adventure</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Arcade</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Board</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Card</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Casino</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Dice</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Educational</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Family</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Music Games</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Puzzle</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Racing</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Role Playing</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Simulation</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Sports Games</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Strategy</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Trivia</span></li>
									<li class="data-vis-making-top-charts__sub-category"><span>Word</span></li>
								</ul>
							</li>
							<li class="data-vis-making-top-charts__category"><span>Books</span></li>
							<li class="data-vis-making-top-charts__category"><span>Business</span></li>
							<li class="data-vis-making-top-charts__category"><span>Catalogs</span></li>
							<li class="data-vis-making-top-charts__category"><span>Education</span></li>
							<li class="data-vis-making-top-charts__category"><span>Entertainment</span></li>
							<li class="data-vis-making-top-charts__category"><span>Finance</span></li>
							<li class="data-vis-making-top-charts__category"><span>Food &amp; Drink</span></li>
							<li class="data-vis-making-top-charts__category"><span>Health &amp; Fitness</span></li>
							<li class="data-vis-making-top-charts__category"><span>Lifestyle</span></li>
							<li class="data-vis-making-top-charts__category"><span>Medical</span></li>
							<li class="data-vis-making-top-charts__category"><span>Music</span></li>
							<li class="data-vis-making-top-charts__category"><span>Navigation</span></li>
							<li class="data-vis-making-top-charts__category"><span>Newsstand</span></li>
							<li class="data-vis-making-top-charts__category"><span>News</span></li>
							<li class="data-vis-making-top-charts__category"><span>Photo &amp; Video</span></li>
							<li class="data-vis-making-top-charts__category"><span>Productivity</span></li>
							<li class="data-vis-making-top-charts__category"><span>Reference</span></li>
							<li class="data-vis-making-top-charts__category"><span>Shopping</span></li>
							<li class="data-vis-making-top-charts__category"><span>Social Networking</span></li>
							<li class="data-vis-making-top-charts__category"><span>Sports</span></li>
							<li class="data-vis-making-top-charts__category"><span>Travel</span></li>
							<li class="data-vis-making-top-charts__category"><span>Utilities</span></li>
							<li class="data-vis-making-top-charts__category"><span>Weather</span></li>
						</ul>
					</div>
					<div class="chart__loading">
						<div class="hamster-wheel">
							<img src="images/hamster-wheel-dark.png" alt="hamster wheel">
						</div>
						<div class="animation-hamster animation-hamster--dark"></div>
					</div>
					<div class="data-vis-making-top-charts__data-container">
						<div class="data-vis-making-top-charts__data-column">
							<h2 class="ref-icon-before--download">Downloads To Be in Free List</h2>
							<ul class="js-downloads-free-list">
								<li class="data-vis-making-top-charts__item" data-id="free-ove"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item data-vis-making-top-charts__item--has-sub-items" data-id="free-gam">
									<span class="data-bar"></span>
									<ul>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_act"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_adv"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_arc"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_boa"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_car"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_cas"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_dic"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_edu"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_fam"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_mus"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_puz"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_rac"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_rol"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_sim"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_spo"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_str"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_tri"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="free-sub_wor"><span class="data-bar"></span></li>
									</ul>
								<li class="data-vis-making-top-charts__item" data-id="free-boo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-bus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-cat"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-edu" ><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-ent"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-fin"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-foo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-hea"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-lif"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-med"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-mus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-nav"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-nws"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-new"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-pho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-pro"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-red"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-sho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-soc"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-spo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-tra"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-uti"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="free-wea"><span class="data-bar"></span></li>
							</ul>
						</div>

						<div class="data-vis-making-top-charts__data-column">
							<h2 class="ref-icon-before--download">Downloads To Be in Paid List</h2>
							<ul class="js-downloads-paid-list">
								<li class="data-vis-making-top-charts__item" data-id="paid-ove"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item data-vis-making-top-charts__item--has-sub-items" data-id="paid-gam">
									<span class="data-bar"></span>
									<ul>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_act"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_adv"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_arc"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_boa"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_car"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_cas"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_dic"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_edu"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_fam"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_mus"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_puz"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_rac"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_rol"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_sim"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_spo"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_str"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_tri"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="paid-sub_wor"><span class="data-bar"></span></li>
									</ul>
								<li class="data-vis-making-top-charts__item" data-id="paid-boo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-bus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-cat"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-edu"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-ent"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-fin"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-foo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-hea"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-lif"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-med"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-mus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-nav"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-nws"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-new"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-pho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-pro"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-red"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-sho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-soc"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-spo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-tra"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-uti"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="paid-wea"><span class="data-bar"></span></li>
							</ul>
						</div>

						<div class="data-vis-making-top-charts__data-column data-vis-making-top-charts__data-column--revenue">
							<h2 class="ref-icon-before--revenue">Revenue To Be in Grossing List</h2>
							<ul class="js-revenue-grossing-list">
								<li class="data-vis-making-top-charts__item" data-id="gros-ove"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item data-vis-making-top-charts__item--has-sub-items" data-id="gros-gam">
									<span class="data-bar"></span>
									<ul>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_act"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_adv"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_arc"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_boa"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_car"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_cas"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_dic"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_edu"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_fam"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_mus"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_puz"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_rac"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_rol"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_sim"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_spo"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_str"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_tri"><span class="data-bar"></span></li>
										<li class="data-vis-making-top-charts__item" data-id="gros-sub_wor"><span class="data-bar"></span></li>
									</ul>
								<li class="data-vis-making-top-charts__item" data-id="gros-boo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-bus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-cat"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-edu"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-ent"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-fin"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-foo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-hea"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-lif"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-med"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-mus"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-nav"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-nws"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-new"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-pho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-pro"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-red"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-sho"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-soc"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-spo"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-tra"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-uti"><span class="data-bar"></span></li>
								<li class="data-vis-making-top-charts__item" data-id="gros-wea"><span class="data-bar"></span></li>
							</ul>
						</div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div id="js-component-import--account-container" class="panel-right-container js-account-container"></div>
	<div id="js-component-import--search-container" class="panel-right-container js-search-container"></div>

 	<script src="js/vendor/jquery-1.11.1.min.js"></script>
 	<script src="js/vendor/handlebars-v2.0.0.js"></script> <!-- static templates only -->
 	<script src="js-v2/templates/templates.js"></script> <!-- static templates only -->
 	<script src="js/vendor/modernizr.2.8.3.custom.min.js"></script>

	<!--[if IE 9]>
		<script src="js/vendor/jquery.mCustomScrollbar.concat.min.js"></script>
	<![endif]-->

	<div id="js-appendScriptsContainer"></div>

	<script src="js-v2/app-include-templates.js"></script> <!-- static templates only -->
  <script src="js-v2/application.js"></script>

  <script>

  	$(window).on("load", function(){
		  new Page();

		  var FilterDropDown = function($domElement) {

				var $thisSelectBox = $domElement,
						$dropDownContainer = $("<ul>").addClass("form-field--select__dropdown"),
						$currentValue = $("<span>").addClass("form-field--select__box ref-icon-after--angle-down js-dropdown-trigger");

				$thisSelectBox.find('option').each(function(){
					
					var $thisOption = $(this),
							selectedClass = "";

					if($thisOption.val() != "") {

						if($thisOption.is(":selected")) {
							if($thisOption.val() != "") {
								selectedClass = "is-selected";
								$currentValue.text($thisOption.text());
							}
						}

						var $newListItem = $("<li>");
						$dropDownContainer.append($newListItem
																					.addClass("js-dropdown-option")																		
																					.addClass(selectedClass)
																					.attr('data-value', $thisOption.attr('value'))
																					.on("click", function() {
																						$thisSelectBox.find("option").removeAttr("selected");
																						$thisOption.attr("selected", "selected");
																						$currentValue.text($thisOption.text());
																						$dropDownContainer.toggle();
																						$thisSelectBox.parent("div").toggleClass("is-open");
																						$thisSelectBox.parent("div").removeClass("nothing-selected");
																						$dropDownContainer.find(".is-selected").removeClass("is-selected");
																						$(this).addClass("is-selected");

																						// check the user role

																						// request data based on filters
																					})
																					.append($("<span>").text($thisOption.text()))
																		);
					} else {
						// no option value means placeholder text before option is selected
						$currentValue.text($thisOption.text());
					}

				});

				$currentValue.on("click", function(){
					if(!$thisSelectBox.attr("disabled")) {
						var $parentDiv = $thisSelectBox.parent("div");
						if($parentDiv.hasClass("is-open")) {
							$dropDownContainer.toggle();	
							$parentDiv.toggleClass("is-open");
						} else {
							setTimeout(function(){
								if(!$parentDiv.hasClass("is-open")) {
									closeAllFilters();
								}
								var parentWidth = $parentDiv.width();
								var parentHeight = $parentDiv.height();
								$dropDownContainer.css({"min-width": parentWidth + "px"});
								$dropDownContainer.toggle();	
								$parentDiv.toggleClass("is-open");
							}, 50); // allow time for instance.closeAllFilters() to close other filters first
						}
					}
				});

				if($currentValue.text() == "") {
					$thisSelectBox.parent("div").addClass("nothing-selected");
				}

				$thisSelectBox.parent("div").append($currentValue)
																		.append($dropDownContainer);
			};

			function closeAllFilters() {
				$('.js-secondary-filter.is-open .form-field--select__dropdown').hide();
				$('.js-secondary-filter.is-open').removeClass("is-open");
			}

			$("html").on("click", function(e){
				if(!$(e.target).hasClass("js-no-close-on-click") && !$(e.target).hasClass("js-clear-all")) {
					closeAllFilters();	
				}
			});

		  $('.js-select-box').each(function() {
  			new FilterDropDown($(this));
  		});

  		$('.js-has-subcategories').on("click", function(){
  			$('.js-page-container').toggleClass("is-showing-subcategories");
  		});

		  function getMaxValueFromArray(list) {
				var mx = 0;
				for(var x = 0; x < list.length; x++) {
					if(list[x].value > mx) {
						mx = list[x].value;
					}
				}

				return mx;
			}

			function outputResults(dataArray, resultItemIdPrefix, valuePrefix, maxGrossing) {
					$.each(dataArray, function(){
						var id = this.id;
						var spanWidth = (this.value / maxGrossing) * 100;
						var thisValue = valuePrefix + this.value;
						var noDataCSSClass = "";
						if(this.value == undefined || this.value <= 0) {
							console.log(this.value);
							thisValue = "No data"
							noDataCSSClass = "is-no-data";
						}
						var valueSpan = $("<span>").text(thisValue).addClass("data-value").addClass(noDataCSSClass);
						valueSpan.append($("<span>").text(this.name).addClass("data-name"));
						$('.data-vis-making-top-charts__item[data-id=' + resultItemIdPrefix + id + '] > .data-bar').width(spanWidth + "%");

						$('.data-vis-making-top-charts__item[data-id=' + resultItemIdPrefix + id + ']').append(valueSpan);
					});


			}

  		// get default data
			$.getJSON( "js/data-lab/200-uk-mar.json", function( data ) {
				setTimeout(function(){
					$('.js-page-container').removeClass('is-loading');
					
					if(data["GROSSING"].categories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["GROSSING"].categories);
						outputResults(data["GROSSING"].categories, "gros-", "$", maxGrossing);
					}

					if(data["GROSSING"].subcategories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["GROSSING"].categories);
						outputResults(data["GROSSING"].subcategories, "gros-", "$", maxGrossing);
					}

					if(data["FREE"].categories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["FREE"].categories);
						outputResults(data["FREE"].categories, "free-", "", maxGrossing);
					}

					if(data["FREE"].subcategories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["FREE"].categories);
						outputResults(data["FREE"].subcategories, "free-", "", maxGrossing);
					}

					if(data["PAID"].categories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["PAID"].categories);
						outputResults(data["PAID"].categories, "paid-", "", maxGrossing);
					}

					if(data["PAID"].subcategories.length > 0) {
						var maxGrossing = getMaxValueFromArray(data["PAID"].categories);
						outputResults(data["PAID"].subcategories, "paid-", "", maxGrossing);
					}

				}, 1000000);
			});

  	});
  </script>
</body>