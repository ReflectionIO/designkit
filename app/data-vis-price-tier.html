<!doctype html>
<html lang="en" class="no-js" ng-app="reflectionApp">
<head>
	<meta charset="utf-8" />
	<title>Reflection Lab - Price Tier Distribution</title>
	<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<link rel="stylesheet" media="screen, projection" type="text/css" href="design-kit-v2.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Open Sans:400,600,700,400italic,600italic', 'Source Sans Pro:400,600,700', 'Lato:400,700,400italic']
    }
  });
</script> <script src="js/vendor/modernizr.2.8.3.custom.min.js"></script></head>
<!-- <script src="js/data-vis/making_the_top_200.js"></script> -->
<script src="js/vendor/angular.js"></script>
<script>
	// populate the data table
		'use strict';

		var appData = [{'number_of_apps_per_day': 62, 'price': 0.79, 'average_downloads': 38, 'top10_average_downloads': 511},
           {'number_of_apps_per_day': 45, 'price': 1.49, 'average_downloads': 22, 'top10_average_downloads': 168},
           {'number_of_apps_per_day': 25, 'price': 2.29, 'average_downloads': 20, 'top10_average_downloads': 144},
           {'number_of_apps_per_day': 2, 'price': 2.49, 'average_downloads': 96, 'top10_average_downloads': 196},  
           {'number_of_apps_per_day': 16, 'price': 2.99, 'average_downloads': 40, 'top10_average_downloads': 505},
           {'number_of_apps_per_day': 37, 'price': 3.99, 'average_downloads': 24, 'top10_average_downloads': 213},
           {'number_of_apps_per_day': 2, 'price': 4.48, 'average_downloads': 11, 'top10_average_downloads': 17},
           {'number_of_apps_per_day': 7, 'price': 4.98, 'average_downloads': 121, 'top10_average_downloads': 565}, 
           {'number_of_apps_per_day': 1, 'price': 5.99, 'average_downloads': 18, 'top10_average_downloads': 45},  
           {'number_of_apps_per_day': 1, 'price': 6.99, 'average_downloads': 195, 'top10_average_downloads': 288}, 
           {'number_of_apps_per_day': 1, 'price': 7.99, 'average_downloads': 9, 'top10_average_downloads': 14}, 
           {'number_of_apps_per_day': 0, 'price': 10.49, 'average_downloads': 6, 'top10_average_downloads': 6},
           {'number_of_apps_per_day': 0, 'price': 10.99, 'average_downloads': 8, 'top10_average_downloads': 8}, 
           {'number_of_apps_per_day': 1, 'price': 11.99, 'average_downloads': 9, 'top10_average_downloads': 10}, 
           {'number_of_apps_per_day': 0, 'price': 14.99, 'average_downloads': 11, 'top10_average_downloads': 11},
           {'number_of_apps_per_day': 0, 'price': 15.99, 'average_downloads': 7, 'top10_average_downloads': 7}];

		var reflectionApp = angular.module('reflectionApp', [])
			.controller('DataController', function($scope, $http) {

			var dataList = this;
			dataList.data = appData;

				dataList.highestNumberOfApps = 0;
				for(var i = 0; i < dataList.data.length; i++) {
					if(parseInt(dataList.data[i].number_of_apps_per_day) > dataList.highestNumberOfApps) {
						dataList.highestNumberOfApps = dataList.data[i].number_of_apps_per_day;
					}
				}

				dataList.calculateBarHeight = function(number_of_apps_per_day) {
					var barHeight = 0;
					if(number_of_apps_per_day > 0) {
						barHeight = (number_of_apps_per_day / dataList.highestNumberOfApps) * 100;
					}

		    	return barHeight;
		    }
		});
</script>
<body class="page-data-vis page-top-two-hundred page-price-tier">
	<!--[if (lt IE 9)]>
      <div class="window-warning">
  			<p>Uh oh... Reflection doesn't work in this browser. &nbsp; &nbsp;<a href="http://outdatedbrowser.com/en" target="_blank">Download a compatible browser</a></p>
  		</div>
  <![endif]-->
  <header id="js-component-import--global-header" class="global-header">
  	<div class="site-logo">
			<a href="/">
				<img src="images/logo-reflection-header.png" alt="Reflection logo" class="img-site-logo">
			</a>
		</div>
  </header>
  
	<div id="js-component-import--panel-left" class="panel-left js-panel-left js-custom-scrollbar" data-mcs-theme="minimal-dark"></div>

	<div class="l-page-container">
		<div id="main" class="l-main" role="main">

			<div class="grid-container" ng-controller="DataController as dataList">
				
				<div class="grid__row grid__row--heading-row">
					<h1 class="heading-style--heading-three page-title">Price Tier Distribution <span>UK / iPhone / Top 200 Paid Apps / Games Category</span></h1>
					<h2 class="page-subtitle">June 2016</h2>
				</div>

				<!-- Bar Chart -->
				<h2 class="bar-chart-title">Number of apps per price tier</h2>
				<h4 class="bar-chart-sub-title bar-chart-sub-title--first">Daily average for June 2016</h4>
				<ul class="bar-chart">
					<li ng-repeat="dataItem in dataList.data" style='height: {{dataList.calculateBarHeight(dataItem.number_of_apps_per_day)}}%'>
						<span class="price-label">&pound;{{ dataItem.price }}</span>
						<span class="number-of-apps-label">{{ dataItem.number_of_apps_per_day }}</span>
					</li>
				</ul>

				<!-- Polar Chart -->
				<h2 class="spider-chart-title">Price tiers that make the most revenue</h2>
					<h4 class="bar-chart-sub-title">(Daily average for June 2016 -  revneue from downloads only)</h4>
				<div id="polar-chart-container"></div>

				<!-- Polar Chart -->
				<h2 class="spider-chart-title">Revenue for the top ten apps in each price tier</h2>
					<h4 class="bar-chart-sub-title">(Daily average for June 2016 -  revneue from downloads only)</h4>
				<div id="polar-chart-container-two"></div>

			</div>

		</div>
	</div>

 	<script src="js/vendor/jquery-1.11.1.min.js"></script>
 	<script src="https://code.highcharts.com/highcharts.js"></script>
 	<script src="https://code.highcharts.com/highcharts-more.js"></script>

  <script>

  	$(function () {

  		var priceCategories = [];
  		for (var i = 0; i < appData.length; i++) {
  			priceCategories.push(appData[i].price);
  		}

  		var averageDownloadsAll = [];
  		for (var i = 0; i < appData.length; i++) {
  			averageDownloadsAll.push(appData[i].average_downloads);
  		}

  		var averageRevenueAll = [];
  		for (var i = 0; i < appData.length; i++) {
  			averageRevenueAll.push(appData[i].average_downloads * appData[i].price);
  		}

		  $('#polar-chart-container').highcharts({
		    chart: {
		        polar: true,
		        type: 'line'
		    },

		    title: {
		        text: '',
		        x: -80
		    },

		    pane: {
		        size: '80%'
		    },

		    xAxis: {
		        categories: priceCategories,
		        tickmarkPlacement: 'on',
		        lineWidth: 0
		    },

		    yAxis: [{
		        gridLineInterpolation: 'polygon',
		        lineWidth: 0,
		        min: 0,
		        labels: {
		        	align: 'left',
		        	x: 12
		        }
		    },{
		        gridLineInterpolation: 'polygon',
		        lineWidth: 0,
		        min: 0,
		        labels: {
		        	align: 'right',
		        	x: -12
		        }
		    }],

		    tooltip: {
		        shared: true,
		        pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/>'
		    },

		    legend: {
		        align: 'bottom',
		        itemMarginTop: 5,
            itemMarginBottom: 5,
		        verticalAlign: 'bottom',
		        y: 70,
		        layout: 'vertical'
		    },

		    series: [{
		    		yAxis: 0,
		        name: 'Average Revenue for all apps',
		        data: averageRevenueAll,
		        pointPlacement: 'on',
		        color: '#f5c943'
		    }, {
		    		yAxis: 1,
		        name: 'Average Downloads for all apps',
		        data: averageDownloadsAll,
		        pointPlacement: 'on',
		        color: '#beb9db'
		    }]

		  });

			
			var topTenAverageDownloads = [];
  		for (var i = 0; i < appData.length; i++) {
  			topTenAverageDownloads.push(appData[i].top10_average_downloads);
  		}

  		var averageRevenueTopTen = [];
  		for (var i = 0; i < appData.length; i++) {
  			averageRevenueTopTen.push(appData[i].top10_average_downloads * appData[i].price);
  		}

			$('#polar-chart-container-two').highcharts({
		    chart: {
		        polar: true,
		        type: 'line'
		    },

		    title: {
		        text: '',
		        x: -80
		    },

		    pane: {
		        size: '80%'
		    },

		    xAxis: {
		        categories: priceCategories,
		        tickmarkPlacement: 'on',
		        lineWidth: 0
		    },

		    yAxis: [{
		        gridLineInterpolation: 'polygon',
		        lineWidth: 0,
		        min: 0,
		        labels: {
		        	align: 'left',
		        	padding: 10,
		        	x: 12
		        }
		    },{
		        gridLineInterpolation: 'polygon',
		        lineWidth: 0,
		        min: 0,
		        labels: {
		        	align: 'right',
		        	x: -12
		        }
		    }],

		    tooltip: {
		        shared: true,
		        pointFormat: '<span style="color:{series.color}">{series.name}: <b>{point.y:,.0f}</b><br/>'
		    },

		    legend: {
		        align: 'bottom',
		        itemMarginTop: 5,
            itemMarginBottom: 5,
		        verticalAlign: 'bottom',
		        y: 70,
		        layout: 'vertical'
		    },

		    series: [{
		    		yAxis: 0,
		        name: 'Average Revenue for top ten apps',
		        data: averageRevenueTopTen,
		        pointPlacement: 'on',
		        color: '#f5c943'
		    }, {
		    		yAxis: 1,
		        name: 'Average Downloads for top ten apps',
		        data: topTenAverageDownloads,
		        pointPlacement: 'on',
		        color: '#beb9db'
		    }]

		  });

		});

		$(document).on("ready", function(){

		});
  </script>
</body>