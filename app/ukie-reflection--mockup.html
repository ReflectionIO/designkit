<!doctype html>
<html lang="en" ng-app="reflectionApp">
<head>
	<meta charset="utf-8" />
	<title>Reflection Data - Top 20</title>
	<link href="css/ukie-online.css" type="text/css" rel="stylesheet" />
	<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:600,400' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Lato:400,700' rel='stylesheet' type='text/css'>
	<script src="js/vendor/angular.js"></script>
	<script>
		// populate the data table
		'use strict';

		/* Controllers */

		var reflectionApp = angular.module('reflectionApp', [])
			.controller('DataController', function() {
		    var dataList = this;
		    dataList.data = [{"Name": "Clash of Clans", "icon_url": "http://is1.mzstatic.com/image/thumb/Purple6/v4/78/55/fb/7855fb6e-1d59-90d0-3617-487000a1b912/source/100x100bb.jpg", "LastWeek": 1.0, "Rank": 1, "Change": 0.0, "Developer": "Supercell"}, {"Name": "Candy Crush Saga", "icon_url": "http://is5.mzstatic.com/image/thumb/Purple69/v4/50/eb/7f/50eb7f72-a024-724c-9489-67d8f9f703c2/source/100x100bb.jpg", "LastWeek": 2.0, "Rank": 2, "Change": 0.0, "Developer": "King.com Limited"}, {"Name": "Game of War - Fire Age", "icon_url": "http://is2.mzstatic.com/image/thumb/Purple6/v4/cb/c7/97/cbc797b4-ee4b-aaed-63e0-0c5cf760d4f6/source/100x100bb.jpg", "LastWeek": 3.0, "Rank": 3, "Change": 0.0, "Developer": "Machine Zone, Inc"}, {"Name": "Candy Crush Soda Saga", "icon_url": "http://is5.mzstatic.com/image/thumb/Purple69/v4/8f/52/dd/8f52dd9c-ea8f-437b-fc7b-11a76b6813b1/source/100x100bb.jpg", "LastWeek": 4.0, "Rank": 4, "Change": 0.0, "Developer": "King.com Limited"}, {"Name": "Boom Beach", "icon_url": "http://is4.mzstatic.com/image/thumb/Purple69/v4/47/06/cb/4706cb60-9985-73ec-8838-1c1b9647036c/source/100x100bb.jpg", "LastWeek": 5.0, "Rank": 5, "Change": 0.0, "Developer": "Supercell"}, {"Name": "MARVEL Contest of Champions", "icon_url": "http://is5.mzstatic.com/image/thumb/Purple69/v4/95/33/bf/9533bf52-dadc-857e-5c22-1dd14b36cd2e/source/100x100bb.jpg", "LastWeek": 8.0, "Rank": 6, "Change": 2.0, "Developer": "Kabam"}, {"Name": "Clash of Kings - CoK", "icon_url": "http://is3.mzstatic.com/image/thumb/Purple6/v4/06/5c/b1/065cb1d2-8e64-b271-6608-006f27b2aaf3/source/100x100bb.jpg", "LastWeek": 9.0, "Rank": 7, "Change": 2.0, "Developer": "ELEX Wireless"}, {"Name": "8 Ball Pool\u2122", "icon_url": "http://is5.mzstatic.com/image/thumb/Purple3/v4/98/25/5d/98255dd7-c1f9-7491-204e-4d12ea623033/source/100x100bb.jpg", "LastWeek": 7.0, "Rank": 8, "Change": -1.0, "Developer": "Miniclip.com"}, {"Name": "Score! Hero", "icon_url": "http://is4.mzstatic.com/image/thumb/Purple6/v4/c5/53/ee/c553eeb3-ea46-77af-245b-553444ed13a8/source/100x100bb.jpg", "LastWeek": 10.0, "Rank": 9, "Change": 1.0, "Developer": "First Touch Games Ltd."}, {"Name": "The Sims\u2122 FreePlay", "icon_url": "http://is3.mzstatic.com/image/thumb/Purple3/v4/a7/0d/db/a70ddbf1-6c68-83f3-b785-d3e84eb4b67a/source/100x100bb.jpg", "LastWeek": 14.0, "Rank": 10, "Change": 4.0, "Developer": "Electronic Arts"}, {"Name": "Kim Kardashian: Hollywood", "icon_url": "http://is1.mzstatic.com/image/thumb/Purple69/v4/71/5a/55/715a55e8-4590-597c-d0d2-67c7e17df6b1/source/100x100bb.jpg", "LastWeek": 6.0, "Rank": 11, "Change": -5.0, "Developer": "Glu Games Inc"}, {"Name": "Farm Heroes Saga", "icon_url": "http://is2.mzstatic.com/image/thumb/Purple69/v4/f5/fe/cc/f5fecc03-9874-38f7-5c9f-cd1a426a54c6/source/100x100bb.jpg", "LastWeek": 11.0, "Rank": 12, "Change": -1.0, "Developer": "King.com Limited"}, {"Name": "The Simpsons\u2122: Tapped Out", "icon_url": "http://is2.mzstatic.com/image/thumb/Purple69/v4/06/bd/fd/06bdfda9-834b-82b2-1570-5d58c24b1d10/source/100x100bb.jpg", "LastWeek": 13.0, "Rank": 13, "Change": 0.0, "Developer": "Electronic Arts"}, {"Name": "Summoners War", "icon_url": "http://is5.mzstatic.com/image/thumb/Purple69/v4/b7/8f/9f/b78f9f22-3293-97e8-9b97-a253bcbb82bc/source/100x100bb.jpg", "LastWeek": null, "Rank": 14, "Change": null, "Developer": "Com2uS Corp."}, {"Name": "Minecraft: Pocket Edition", "icon_url": "http://is3.mzstatic.com/image/thumb/Purple6/v4/a9/b0/33/a9b033b6-36e6-2090-b45e-1e66a0a34ba4/source/100x100bb.jpg", "LastWeek": 20.0, "Rank": 15, "Change": 5.0, "Developer": "Mojang"}, {"Name": "Hay Day", "icon_url": "http://is1.mzstatic.com/image/thumb/Purple69/v4/55/1a/03/551a03f3-0eda-06bb-fe92-1fa99beac425/source/100x100bb.jpg", "LastWeek": 15.0, "Rank": 16, "Change": -1.0, "Developer": "Supercell"}, {"Name": "Minecraft: Story Mode", "icon_url": "http://is4.mzstatic.com/image/thumb/Purple3/v4/66/72/28/667228d3-a044-886d-5303-a7f4ad140b93/source/100x100bb.jpg", "LastWeek": 12.0, "Rank": 17, "Change": -5.0, "Developer": "Telltale Inc"}, {"Name": "Pirate Kings", "icon_url": "http://is1.mzstatic.com/image/thumb/Purple69/v4/28/6b/dc/286bdc03-b3d5-50b5-a94d-f90d101bb520/source/100x100bb.jpg", "LastWeek": 17.0, "Rank": 18, "Change": -1.0, "Developer": "Jelly Button Games Ltd"}, {"Name": "Jurassic World\u2122: The Game", "icon_url": "http://is3.mzstatic.com/image/thumb/Purple69/v4/18/e0/0b/18e00bed-ebbc-7b91-d3cf-a3f27be73c75/source/100x100bb.jpg", "LastWeek": 16.0, "Rank": 19, "Change": -3.0, "Developer": "Ludia"}, {"Name": "Empires & Allies", "icon_url": "http://is2.mzstatic.com/image/thumb/Purple69/v4/51/19/56/5119567d-d901-f42d-5909-1a083d10885b/source/100x100bb.jpg", "LastWeek": null, "Rank": 20, "Change": null, "Developer": "Zynga Inc."}];
		   	
		   	dataList.titles = {"date": "26 Oct - 01 Nov 2015, Week 44", "title": "Top 20 Free iPhone Games (UK)"};

		    dataList.getLastWeek = function(x) {
		    	if(this.data[x].LastWeek != null) {
		    		return this.data[x].LastWeek;
		    	} else {
		    		return "N/A";
		    	}
		    	return null;
		    }

		    dataList.getLastWeekCSSClass = function(x) {
		    	if(this.data[x].LastWeek == null) {
		    		return "null-movement";
		    	}
		    	return null;
		    }

		    dataList.getChangeCSSClass = function(x) {
		    	if(this.data[x].Change != null && this.data[x].Change != 0.0) {
		    		if(parseInt(this.data[x].Change, 10) < 0) {
			    		return "negative-movement";
			    	} else {
			    		return "positive-movement";
			    	}
		    	} else if(this.data[x].Change == null) {
		    		return "null-movement";
		    	}
		    	return null;
		    }

		    dataList.getChange = function(x) {
		    	if(this.data[x].Change != null) {
		    		var change = parseInt(this.data[x].Change, 10);
		    		return (change < 0) ? change * -1 : change;
		    	} else {
		    		return "N/A";
		    	}
		    	return null;
		    }
		  });
	</script>
</head>
<body id="body" ng-controller="DataController as dataList">
	<header class="reflection-header">
		<div class="reflection-header__logo-container">
		<img src="images-ukie/Reflection_UKIE_Logo@2x.png" alt="UKIE logo" class="logo-reflection-ukie" />
		</div>
		<div class="reflection-header__heading-container">
			<div>
				<div class="heading-container__headings">
					<h1>{{ dataList.titles.title }}</h1>
					<h2>{{ dataList.titles.date }}</h2>
				</div>
			</div>
		</div>
	</header>
	<article class="reflection-article">
		<table class="reflection-table-data">
			<thead>
				<tr>
					<th class="table-data__this-week">Last Period</th>
					<th class="table-data__this-period">This Period</th>
					<th class="table-data__change">Change</th>
					<th class="table-data__app-title">Title</th>
					<th class="table-data__app-developer">Developer</th> 					
				</tr>
			</thead>
			<colgroup>
				<col style="width: 11%;">
				<col style="width: 11%;">
				<col style="width: 10%;">
				<col style="width: 37%;">
				<col style="width: 30%;">
			</colgroup>
			<tbody>
				<tr ng-repeat="dataItem in dataList.data">
					<td class="table-data__this-week"><span class="{{dataList.getLastWeekCSSClass($index)}}">{{dataList.getLastWeek($index)}}</span></td>
					<td class="table-data__this-period">
						{{dataItem.Rank}}
					</td>
					<td class="table-data__change"><span class={{dataList.getChangeCSSClass($index)}}>{{dataList.getChange($index)}}</span></td>
					<td class="table-data__app-title">
						<img src="{{dataItem.icon_url}}" alt="App logo" />
						<div class="title-container">
							<span>{{dataItem.Name}}</span>
						</div>
					</td>
					<td class="table-data__app-developer"><div><span>{{dataItem.Developer}}</span></div></td>
				</tr>
			</tbody>
		</table>
	</article>

	<script>
		var is_chrome = navigator.userAgent.indexOf('Chrome') > -1;
    var is_explorer = navigator.userAgent.indexOf('MSIE') > -1;
    var is_firefox = navigator.userAgent.indexOf('Firefox') > -1;
    var is_safari = navigator.userAgent.indexOf("Safari") > -1;
    var is_opera = navigator.userAgent.toLowerCase().indexOf("op") > -1;
    if ((is_chrome)&&(is_safari)) {is_safari=false;}
    if ((is_chrome)&&(is_opera)) {is_chrome=false;}

    if (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1) {
    	document.getElementById('body').classList.add('is-safari');
    }
	</script>
</body>
</html>