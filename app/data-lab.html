<!doctype html>
<html lang="en" class="no-js">
<head>
	<meta charset="utf-8" />
	<title>Reflection V2, Product</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<!--[if (gt IE 9)|(IEMobile)|(!IE)]><!-->
		<link rel="stylesheet" type="text/css" href="reflection-main-v2.css" />
	<!--<![endif]-->
	<!--[if IE 9]>
		<link rel="stylesheet" type="text/css" href="ie9-v2-one.css" />
		<link rel="stylesheet" type="text/css" href="ie9-v2-two.css" />
	<![endif]-->
	<!--[if (lt IE 9)]>
		<script src="js/vendor/html5shiv.min.js"></script>
		<link rel="stylesheet" media="screen, projection" type="text/css" href="reflection-main-ie8.css" />
	<![endif]-->
	<link rel="stylesheet" href="js/vendor/jquery.mCustomScrollbar.css" />
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.16/webfont.js"></script>
<script>
  WebFont.load({
    google: {
      families: ['Source Sans Pro:400,600,700', 'Lato:400,700,400italic']
    }
  });
</script></head>
<body>
	<!--[if (lt IE 9)]>
      <div class="window-warning">
  			<p>Uh oh... Reflection doesn't work in this browser. &nbsp; &nbsp;<a href="http://outdatedbrowser.com/en" target="_blank">Download a compatible browser</a></p>
  		</div>
  <![endif]-->

  <header id="js-component-import--global-header" class="global-header"></header>
  
	<div id="js-component-import--panel-left" class="panel-left js-panel-left js-custom-scrollbar" data-mcs-theme="minimal-dark"></div>

	<div class="l-page-container">
		<div id="main" class="l-main" role="main">
			<div class="page-lab-base grid-container">
				
				<div class="grid__row grid__row--heading-row">
					<div class="grid__row--heading-row__left">
						<h1 class="heading-style--heading-three page-title">What Downloads or Revenue are Needed to Break into the Top Charts?</h1>
					</div>
					<div class="grid__row--heading-row__right">
						<button class="ref-button--primary--medium">
	 						Share This
	 					</button>
					</div>
					<div class="filters-row">
						<span class="filter-label">To Break Into</span>
						<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
							<select class="js-select-box">
						    <option value="top200" selected>Top 200 Apps</option>
						    <option value="top150">Top 150 Apps</option>
						    <option value="top100">Top 100 Apps</option>
						    <option value="top50">Top 50 Apps</option>
						    <option value="top20">Top 20 Apps</option>
						    <option value="top10">Top 10 Apps</option>
							</select>
						</div>
						<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
							<select class="js-select-box">
						    <option value="uk" selected>United Kingdom</option>
						    <option value="usa">USA</option>
						    <option value="fra">France</option>
						    <option value="ita">Italy</option>
						    <option value="ger">Germany</option>
							</select>
						</div>

						<div class="filters-right">
							<span class="filter-label">Show Data For</span>
							<div class="secondary-filter secondary-filter--medium form-field--select js-secondary-filter">
								<select class="js-select-box">
							    <option value="mar">March 2016</option>
							    <option value="apr">USA</option>
							    <option value="may">France</option>
							    <option value="jun">Italy</option>
							    <option value="jul" selected>Germany</option>
								</select>
							</div>
						</div>
					</div>
				</div>

				<div class="grid__row data-vis-top-downloads__main is-loading">
					<div class="chart__loading">
						<div class="hamster-wheel">
							<img src="images/hamster-wheel.png" alt="hamster wheel">
						</div>
						<div class="animation-hamster"></div>
					</div>
				</div>

			</div>
		</div>
	</div>

	<div id="js-component-import--account-container" class="panel-right-container js-account-container"></div>
	<div id="js-component-import--search-container" class="panel-right-container js-search-container"></div>

 	<script src="js/vendor/jquery-1.11.1.min.js"></script>
 	<script src="js/vendor/handlebars-v2.0.0.js"></script> <!-- static templates only -->
 	<script src="js-v2/templates/templates.js"></script> <!-- static templates only -->
 	<script src="js/vendor/modernizr.2.8.3.custom.min.js"></script>

	<!--[if IE 9]>
		<script src="js/vendor/jquery.mCustomScrollbar.concat.min.js"></script>
	<![endif]-->

	<div id="js-appendScriptsContainer"></div>

	<script src="js-v2/app-include-templates.js"></script> <!-- static templates only -->
  <script src="js-v2/application.js"></script>

  <script>

  	$(window).on("load", function(){
		  new Page();

		  var FilterDropDown = function($domElement) {

				var $thisSelectBox = $domElement,
						$dropDownContainer = $("<ul>").addClass("form-field--select__dropdown"),
						$currentValue = $("<span>").addClass("form-field--select__box ref-icon-after--angle-down js-dropdown-trigger");

				$thisSelectBox.find('option').each(function(){
					
					var $thisOption = $(this),
							selectedClass = "";

					if($thisOption.val() != "") {

						if($thisOption.is(":selected")) {
							if($thisOption.val() != "") {
								selectedClass = "is-selected";
								$currentValue.text($thisOption.text());
							}
						}

						var $newListItem = $("<li>");
						$dropDownContainer.append($newListItem
																					.addClass("js-dropdown-option")																		
																					.addClass(selectedClass)
																					.attr('data-value', $thisOption.attr('value'))
																					.on("click", function() {
																						$thisSelectBox.find("option").removeAttr("selected");
																						$thisOption.attr("selected", "selected");
																						$currentValue.text($thisOption.text());
																						$dropDownContainer.toggle();
																						$thisSelectBox.parent("div").toggleClass("is-open");
																						$thisSelectBox.parent("div").removeClass("nothing-selected");
																						$dropDownContainer.find(".is-selected").removeClass("is-selected");
																						$(this).addClass("is-selected");

																						// check the user role

																						// request data based on filters
																					})
																					.append($("<span>").text($thisOption.text()))
																		);
					} else {
						// no option value means placeholder text before option is selected
						$currentValue.text($thisOption.text());
					}

				});

				$currentValue.on("click", function(){
					if(!$thisSelectBox.attr("disabled")) {
						var $parentDiv = $thisSelectBox.parent("div");
						if($parentDiv.hasClass("is-open")) {
							$dropDownContainer.toggle();	
							$parentDiv.toggleClass("is-open");
						} else {
							setTimeout(function(){
								if(!$parentDiv.hasClass("is-open")) {
									closeAllFilters();
								}
								var parentWidth = $parentDiv.width();
								var parentHeight = $parentDiv.height();
								$dropDownContainer.css({"min-width": parentWidth + "px"});
								$dropDownContainer.toggle();	
								$parentDiv.toggleClass("is-open");
							}, 50); // allow time for instance.closeAllFilters() to close other filters first
						}
					}
				});

				if($currentValue.text() == "") {
					$thisSelectBox.parent("div").addClass("nothing-selected");
				}

				$thisSelectBox.parent("div").append($currentValue)
																		.append($dropDownContainer);
			};

			function closeAllFilters() {
				$('.js-secondary-filter.is-open .form-field--select__dropdown').hide();
				$('.js-secondary-filter.is-open').removeClass("is-open");
			}

			$("html").on("click", function(e){
				if(!$(e.target).hasClass("js-no-close-on-click") && !$(e.target).hasClass("js-clear-all")) {
					closeAllFilters();	
				}
			});

		  $('.js-select-box').each(function() {
  			new FilterDropDown($(this));
  		});

  	});
  </script>
</body>